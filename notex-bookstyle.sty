%% ------------------------------------------------- %%
%% NoTeX report & book styling
%% ------------------------------------------------- %%

% THIS IS A WIP PERSONAL PROJECT!
%
% USE WITH CAUTION!
%
% I don't fully comprehend LaTeX, so many things could
% be poorly written or straight out wrong!
%
% It's basically a collection of stuff I found online
% or wrote myselft in order to prettify my notes.
% Originally designed to work in Italian, on Overleaf.

%% ------------------------------------------------- %%

%% HOW TO USE
% Download the notex-bookstyle.sty
% - \usepackage{notex-bookstyle}
%   if notex-bookstyle.sty is in the same folder
%   as the .tex file
% - \usepackage{folder-name/notex-bookstyle}
%   if notex-bookstyle.sty is in a specific folder.

%% IMPORTANT:
% Use in combination with notex.sty.

%% ------------------------------------------------- %%

%% LICENSE

%% notex-bookstyle.sty
%% Copyright 2021 Matteo Bramardi
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Matteo Bramardi.
%
% This work consists of the files notex.sty and notex-bookstyle.sty.

%% ------------------------------------------------- %%

%% TABLE OF CONTENT:
%
% 1 - Chapter mark
% 2 - Chapter
% 3 - Part

%% ------------------------------------------------- %%

%% 1 - Chapter mark
\renewcommand*{\chaptermark}[1]{%
    \markboth{\MakeUppercase{\thechapter.\ #1}}{}%
}%

\newlength{\chaptertitlewidth} % Chapter title width

%% 2 - Chapter
\titleformat{\chapter}[display]
    {\normalsize\huge\color{black}}%
    {\setlength{\chaptertitlewidth}{\dimexpr%
        +\mdflength{innerleftmargin}
        +\mdflength{innerrightmargin}
        +\mdflength{leftmargin}
        +\mdflength{rightmargin}
    }%
    \savebox0{%
        \begin{varwidth}{\dimexpr\linewidth-\chaptertitlewidth\relax}
            \textbf{\textsc{~\chaptertitlename}~\thechapter~}
        \end{varwidth}%
    }%
    \begin{mdframed}[
        userdefinedwidth=\dimexpr\wd0+1.4\chaptertitlewidth\relax,
        backgroundcolor=FriendlyRed!5,
        linecolor=FriendlyRed,
        linewidth=6pt,
        leftline=true,
        bottomline=false,topline=false,rightline=false,
        innertopmargin=.2em,innerbottommargin=.2em,
        skipabove=0pt,
        skipbelow=0pt
    ]
        \usebox0%
    \end{mdframed}}%
    {0pt}%
    {\bfseries\huge\vspace{-12mm}}%

%% 3 - Part
\titleformat{\part}[display]
    {\normalsize\huge\filcenter\color{black}}%
    {\textbf{\textsc{Parte}~\thepart}}%
    {0pt}%
    {\bfseries\Huge}%